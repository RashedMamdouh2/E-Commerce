@model Category

<!-- Portfolio Section -->

<section id="portfolio" class="portfolio section">

    <!-- Section Title -->

    <div class="container section-title" data-aos="fade-up">
        <h2>@Model.Name</h2>
        <p>@Model.Description</p>
        <section id="about" class="about section">
            <form method="post" asp-action="ShowCategory" asp-controller="Category" enctype="multipart/form-data" class="search-bar">
                <input name="id" type="number" value="@Model.Id" hidden />
                <input name="input" type="search" placeholder="Search For Anything..." class="search-input" value="@ViewBag.searchValue" />
                <button type="submit" class="search-button">Search</button>
            </form>

        </section>

    </div><!-- End Section Title -->
    <div class="container">

        <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">

            <ul class="portfolio-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
                    <li data-filter="*" class="filter-active">All</li>
                @foreach (var filter in Model.Filters)
                {
                    <li data-filter=".filter-@filter.Name">@filter.Name</li>
                }
            </ul><!-- End Portfolio Filters -->

            <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">
                @foreach(var product in Model.Products)
                {
                    var filters = string.Join(" ", product.Filters.Select(f => "filter-" + f.Name));
                    <div class="col-lg-4 col-md-6 portfolio-item isotope-item @filters">
                        <div class="portfolio-content h-100">
                            @if (product.Images.Count == 0)
                            {
                                <a href="~/ProductsImages/Default.jpg" data-gallery="@product.Name-gallery-app" class="glightbox"><img src="~/ProductsImages/Default.jpg" class="img-fluid" alt=""></a>

                            }
                            else
                            {
                                <a href="@product.Images[0].Url" data-gallery="@product.Name-gallery-app" class="glightbox"><img src="@(product.Images[0].Url )" class="img-fluid" alt=""></a>
                                
                            }
                            @foreach (var img in product.Images.Count > 1 ? product.Images[1..] : product.Images)
                            {
                                <a href="@img.Url" data-gallery="@product.Name-gallery-app" class="glightbox" style="display:none;"></a>

                            }
                            <div class="portfolio-info">
                                <h4><a asp-action="ShowProduct" asp-controller="Product" asp-route-id="@product.Id" title="More Details">@product.Name</a> </h4>

                                <p>@product.Description</p>
                                <br />  
                                <span class="badge bg-black fs-6 fw-semibold">
                                    @product.Price L.E
                                </span>
                            </div>
                        </div>
                    </div>
                
                    <!-- End Portfolio Item -->
                }
    
            </div><!-- End Portfolio Container -->

        </div>

    </div>

</section><!-- /Portfolio Section -->